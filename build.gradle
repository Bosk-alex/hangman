apply plugin: 'java'
apply plugin: 'war'

repositories{
    mavenCentral()
}

dependencies {
  providedCompile 'org.mortbay.jetty:jetty:6.1.26'
  providedCompile 'jetty:javax.servlet:5.1.12'
  providedRuntime 'org.mortbay.jetty:jsp-2.1:6.1.14'
  compile 'org.apache.struts:struts2-core:2.2.3'
  compile 'org.apache.struts.xwork:xwork-core:2.2.3'
  compile 'org.apache.struts:struts2-convention-plugin:2.2.3'
  compile 'org.apache.struts:struts2-json-plugin:2.2.3'
  compile 'org.slf4j:slf4j-log4j12:1.6.2'
  testCompile 'junit:junit:4.9'
  testCompile 'org.hamcrest:hamcrest-all:1.1'
}

task libs(type: Sync) {
  from configurations.compile
  from configurations.providedCompile
  from configurations.runtime
  from configurations.providedRuntime
  from configurations.testCompile
  into "$buildDir/lib"
}

[compileJava, compileTestJava]*.options.collect {options -> options.encoding = 'UTF-8'}
[compileJava, compileTestJava]*.options.collect {options -> options.debug = true}

test {
  systemProperties 'file.encoding': 'UTF-8'
}

task(run, dependsOn: 'compile', type: JavaExec) {
  main = 'ee.era.hangman.Launcher'
  classpath = sourceSets.main.runtimeClasspath
  systemProperty 'file.encoding', 'UTF-8'
}

defaultTasks 'clean', 'libs', 'test', 'war'

